Ahhh agora faz total sentido üòÑ ‚Äî √© exatamente por isso que o Pod deu erro.

O Kubernetes **precisa que ConfigMaps e Secrets existam antes** de voc√™ criar o Deployment ou StatefulSet que vai us√°-los. Sen√£o o Pod n√£o consegue nem iniciar.

---

## ‚úÖ Ordem correta para aplicar os ficheiros

Vou te dar uma sequ√™ncia **pr√°tica e segura**, baseada na sua estrutura (`backend`, `database`, `frontend`):

---

### 1Ô∏è‚É£ Backend

1. **ConfigMap do backend**

```bash
kubectl apply -f backend/backend-configmap.yaml
```

2. **Secret do backend**

```bash
kubectl apply -f backend/backend-secret.yaml
```

3. **Headless Service (obrigat√≥rio para StatefulSet)**

```bash
kubectl apply -f backend/backend-service.yaml
```

4. **StatefulSet do backend**

```bash
kubectl apply -f backend/backend-statefulset.yaml
```

> ‚ö° Assim o Pod consegue encontrar **todas as vari√°veis de ambiente** e o Service j√° existe.

---

### 2Ô∏è‚É£ Database (Postgres)

1. ConfigMap do DB

```bash
kubectl apply -f database/db-configmap.yaml
```

2. Secret do DB

```bash
kubectl apply -f database/db-secret.yaml
```

3. Headless Service do DB

```bash
kubectl apply -f database/db-service.yaml
```

4. StatefulSet do DB

```bash
kubectl apply -f database/db-statefulset.yaml
```

---

### 3Ô∏è‚É£ Frontend

* Deployment (n√£o precisa de ConfigMap/Secret se n√£o tiver)

```bash
kubectl apply -f frontend/frontend-deployment.yaml
```

* Service

```bash
kubectl apply -f frontend/frontend-service.yaml
```

---

### 4Ô∏è‚É£ Verificar tudo

```bash
kubectl get pods -w
kubectl get svc
kubectl get statefulset
kubectl get deployment
kubectl get pvc
```

* Aguarde at√© todos os Pods ficarem `Running`
* `READY` deve ser `1/1` ou `2/2` dependendo do Deployment

---

üí° **Dica pr√°tica:**
Sempre **aplique ConfigMaps e Secrets antes de qualquer Deployment/StatefulSet**, porque o Kubernetes **n√£o cria o Pod se as vari√°veis referenciadas n√£o existirem**.

---

Se quiser, posso escrever **um comando √∫nico ‚Äúapply-all.sh‚Äù** que aplica tudo na ordem certa, para evitar esse tipo de problema no futuro.

Quer que eu fa√ßa isso?
